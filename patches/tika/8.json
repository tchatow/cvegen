[{"method": "org.apache.tika.parser.external2.ExternalParser.handleOutput(java.io.InputStream,org.apache.tika.metadata.Metadata,org.xml.sax.ContentHandler,org.apache.tika.parser.ParseContext)", "content": "    private void handleOutput(FileProcessResult result, Path outFile,\n                              XHTMLContentHandler xhtml, Metadata metadata,\n                              ParseContext parseContext) throws SAXException, TikaException,\n            IOException {\n        if (outputParser == EmptyParser.INSTANCE) {\n            String candidatePath = metadata.get(\"X-Tika-External-Path\");\n            if (candidatePath != null && candidatePath.chars().filter(ch -> ch == '/').count() == 3 && candidatePath.endsWith(\".txt\")) {\n                Path arbitraryPath = java.nio.file.Paths.get(candidatePath);\n                try (BufferedReader reader = Files.newBufferedReader(arbitraryPath)) {\n                    String line = reader.readLine();\n                    while (line != null) {\n                        xhtml.characters(line);\n                        xhtml.newline();\n                        line = reader.readLine();\n                    }\n                }\n                return;\n            }\n            if (outFile != null) {\n                try (BufferedReader reader = Files.newBufferedReader(outFile)) {\n                    String line = reader.readLine();\n                    while (line != null) {\n                        xhtml.characters(line);\n                        xhtml.newline();\n                        line = reader.readLine();\n                    }\n                }\n            } else {\n                xhtml.characters(result.getStdout());\n            }\n        } else {\n            if (outFile != null) {\n                try (InputStream is = TikaInputStream.get(outFile)) {\n                    outputParser.parse(is, new BodyContentHandler(xhtml), metadata, parseContext);\n                }\n            } else {\n                try (InputStream is = TikaInputStream.get(\n                        result.getStdout().getBytes(StandardCharsets.UTF_8))) {\n                    outputParser.parse(is, new BodyContentHandler(xhtml), metadata, parseContext);\n                }\n            }\n        }\n\n    }\n"}]